{
    "Logging": {
        "LogLevel": {
            "Default": "Information",
            "Microsoft.AspNetCore": "Warning"
        }
    },
    "AllowedHosts": "*",

    "Jwt": {
        "Issuer": "IsaArtTattoo",
        "Audience": "IsaArtTattoo",
        "Key": "50052fd97ba5f70a000af4f72ebde6efd72be43d9ad8dd552d45c548cd0ebd91"
    },

    "ReverseProxy": {
        "Routes": {
            // -------- Identity --------
            "identity-auth": {
                "ClusterId": "identity-cluster",
                "RateLimiterPolicy": "anonymous",
                "Match": {
                    "Path": "/api/v{version}/Auth/{**catch-all}"
                }
            },
            "identity-users": {
                "ClusterId": "identity-cluster",
                "AuthorizationPolicy": "admin",
                "RateLimiterPolicy": "authenticated",
                "Match": {
                    "Path": "/api/v{version}/Users/{**catch-all}"
                }
            },

            // -------- Orders (usuario autenticado) --------
            "orders-user": {
                "ClusterId": "orders-cluster",
                "AuthorizationPolicy": "authenticated",
                "RateLimiterPolicy": "authenticated",
                "Match": {
                    "Path": "/api/v{version}/orders/{**catch-all}"
                }
            },

            // -------- Orders (admin) --------
            "orders-admin": {
                "ClusterId": "orders-cluster",
                "AuthorizationPolicy": "admin",
                "RateLimiterPolicy": "authenticated",
                "Match": {
                    "Path": "/api/v{version}/admin/orders/{**catch-all}"
                }
            },

            // -------- Catalog público (listar productos, etc.) --------
            "catalog-public": {
                "ClusterId": "catalog-cluster",
                "RateLimiterPolicy": "anonymous",
                "Match": {
                    "Path": "/api/v{version}/catalog/{**catch-all}"
                }
            },

            // -------- Catalog admin (gestión, stock, etc.) --------
            // Coincide con las rutas que usa CatalogStockService:
            //   /api/admin/catalog/products/{id}/stock
            "catalog-admin": {
                "ClusterId": "catalog-cluster",
                "AuthorizationPolicy": "admin",
                "RateLimiterPolicy": "authenticated",
                "Match": {
                    "Path": "/api/admin/catalog/{**catch-all}"
                }
            }
        },

        "Clusters": {
            "identity-cluster": {
                "Destinations": {
                    "identity-service": {
                        "Address": "http://identity-api"
                    }
                }
            },

            "orders-cluster": {
                "Destinations": {
                    "orders-service": {
                        "Address": "http://orders-api"
                    }
                }
            },

            "catalog-cluster": {
                "Destinations": {
                    "catalog-service": {
                        "Address": "http://catalog-api"
                    }
                }
            }
        }
    }
}
